/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package geni_logiciel_projet1;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.*;

public class App {

    private final static Elevator elevator = new Elevator();
    private final static PanelWindow window = new PanelWindow();

    public static void main(String[] args) {

        //Appelle de la fenÃªtre
        SwingUtilities.invokeLater(() -> window.setVisible(true));

        TimerTask task = new TimerTask() {
            public void run() {
                if (!elevator.destination_listIsEmpty()) {
                    elevator.run();
                    updateLabelFloor(String.valueOf(elevator.getCurrent_level()));
                }
                else elevator.updateState(Constante.State.WAITING);
            }
        };
        Timer timer = new Timer();
        timer.schedule(task, 1000,1000);
    }

    static void addDestination(int destination) {
        elevator.addDestination(destination);
    }

    private static void updateLabelFloor(String newString) {
        window.updateLabelFloor(newString);
    }

    static void updateLabelState(int state) {
        window.updateLabelState(state);
    }
}

